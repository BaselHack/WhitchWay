<!DOCTYPE html>

<html lang="de">

  <head>
   <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="viewport" content="initial-scale = 1.0, maximum-scale = 1.0, user-scalable = no">
    <link rel="apple-touch-icon" href="whitchway_192_192.png" >
    <link rel="icon" sizes="192x192" href="whitchway_192_192.png">
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico">
    <link rel="stylesheet" type="text/css" href="whitchway.css">
    <meta charset="utf-8"> 
	<!-- Bootstrap -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">
	<script src="https://code.jquery.com/jquery-3.2.1.min.js" ></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js" integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ" crossorigin="anonymous"></script>
	
	
	
	<script language="javascript" type="text/javascript">
  
	$(document).ready(function() {
			urlTesten();
	});

        
   
	// URL testen, ob diese Daten beinhaltet
	function urlTesten(){
		var url = location.href.split("#")[1];
		//Wenn kein Inhalt nach # ist, dann lassen, sonst ausblenden
		if(url === undefined){
			addRoute();
			
			
		
			//  Muss nichts gemacht werden		 
		}else{
			var d = document.getElementById("intro");
			d.classList.add("visibilityNo");
			var e = document.getElementById("result");
			e.classList.remove("visibilityNo");
			e.classList.add("visibilityYes");
		}
	
		
		
	}
   

	
	
	
	//Daten in die URL schreiben -->
	function manipulateURL() {
		var fromTest = document.getElementById("from1");
		 var r = 1;
		 var newLocation ="";
		 do {
			var from = document.getElementById("from" + r).value;
			var to = document.getElementById("to" + r).value;
			
			
			newLocation +=  "r"+r+"="+from+","+to+";";
			r++;
			fromTest = document.getElementById("from"+r);
			
			
		
			
		} while (fromTest != null);
		window.location = "../bvbrtrc/index.html#"+newLocation; 	
		location.reload();
	}
	   
	   
	<!--- neue Route  -->
	function addRoute(){
	var oldNumb = document.getElementById('counterRoute').getAttribute('value');
	var newNumb = parseInt(oldNumb) + 1;
	var nameButton = "'"+newNumb+"'";
		var string = '<div class="card">'+
		'  				<div class="card-header">'+
		'					Route '+newNumb+' </div>'+
		'				  <div class="card-body">'+
		' 				  <div class="input-group">'+
		'				  <span class="input-group-addon" id="basic-addon1">From </span>'+
		'				  <input id="from'+newNumb+'" value="" type="text" class="form-control" placeholder="Station From" aria-label="from" aria-describedby="basic-addon1">'+
		'				</div>'+
		'      			</br>'+
		'				<div class="input-group">'+
		' 		   	  <span class="input-group-addon" id="basic-addon1">To</span>'+
		'       	  <input id="to'+newNumb+'" value="" type="text" class="form-control" placeholder="Station To" aria-label="to" aria-describedby="basic-addon1">'+
		'     			</div>'+
		'			  </div>'+
		'				</div>'+
		' 				</br>';
		
		document.getElementById('moreRoute'+oldNumb).innerHTML = string;
		
			document.getElementById('counterRoute').setAttribute("value", newNumb);
			var newnewNumb = document.getElementById('moreRoute'+oldNumb).getAttribute('value');	

	}
	
	function edit(){
	//Trennt Seiten URL von Daten -->
	var url = location.href.split("#")[1];
	
	//Trennt Routen-->
	var allRoutes = url.split(";"); 
	var countRoutes =0;
	//Zählt Routen -->
	allRoutes.forEach(function(allRoutesElement) { 
		countRoutes ++;
	});
	
	
	
	if ((countRoutes -2) === 0){
	
	}else{
		var i = 0;
		do {
			addRoute();
			i++;

		}while( i < countRoutes -2);
	}
	var routes = [];
		
		
	//Kann man kürzen -->
	for (var k=0; k<countRoutes-1; k++) {
			
		routes[k] = [];		
		routes[k] [0] = (allRoutes[k].split("=")[1]).split(",")[0];
		routes[k] [1] = (allRoutes[k].split("=")[1]).split(",")[1];
   }
   
	for (n = 0; n < countRoutes -1; n++){
		var a = document.getElementById("from"+(n+1));
		a.value = routes[n][0];
		
		var b = document.getElementById("to"+(n+1));
		b.value = routes[n][1];
		
	}
	 
	
	
	 
	
	
	
	
	var d = document.getElementById("intro");
		d.classList.remove("visibilityNo");
		d.classList.add("visibilityYes");
	var e = document.getElementById("result");
		e.classList.remove("visibilityYes");
		e.classList.add("visibilityNo");
		
		
	
	}
	
	
	
	//function addThrough1(id){
			
			
			
	//		if (parseInt(id) == 1 ){
	//			var oldNumb = document.getElementById('counterThrough').getAttribute('value');
		//		var newNumb = parseInt(oldNumb) + 1;
		//		var string = '<div class="input-group">'+
		//						'<span class="input-group-addon" id="basic-addon1">Through '+newNumb+'</span>'+
		//						'<input type="text" class="form-control" placeholder="Station Through" aria-label="through" aria-describedby="basic-addon1">'+
		//					 '</div>'+
		//					 '</br>'+
		//					 '<div id="moreThrough'+newNumb+'"></div>';
		//		document.getElementById('moreThrough'+oldNumb).innerHTML = string;
		//		document.getElementById('counterThrough').setAttribute("value", newNumb);
		//		var newnewNumb = document.getElementById('moreThrough'+oldNumb).getAttribute('value');
		//	}
			
			
		//	else{
		//		var correctForRoute =parseInt(id)-1
			
		
				
				
				//FUNKTIONIERT NICHT
		//		window.alert("counter-"+id);
				
		//		window.alert(getElementByClassName("counter-2"));
		//		var oldNumb = getElementByClassName("counter-2").getAttribute('value');
		//		var newNumb = parseInt(oldNumb) + 1;
		//		var string = '<div class="input-group">'+
		//						'<span class="input-group-addon" id="basic-addon1">Through '+newNumb+'</span>'+
		//						'<input type="text" class="form-control" placeholder="Station Through" aria-label="through" aria-describedby="basic-addon1">'+
		//					 '</div>'+
		//					 '</br>'+
		//					 '<div id="moreThrough'+newNumb+'"></div>';
		//		getElementByClassName('moreThrough'+oldNumb).innerHTML = string;
		//		getElementByClassName("counter-'+id'").setAttribute("value", newNumb);
		//		var newnewNumb = document.getElementById(route).getElementById('moreThrough'+oldNumb).getAttribute('value');
	//	}			
	//} 
	
	
	
	
	function findStation(){
		window.alert("HALLO");
		
	}



</script> 
	
	
	<!--- CSS Style -->
	<style>
		h1{padding: 20px;}
		form{padding: 20px;}
		.card {padding-bottom: 10px;}
		.input-group {padding: 5 5 5 5;}
		.input-group-addon{width: 100px;}
		.visibilityYes { visibility: visible;}
		.visibilityNo { visibility: collapse;}
		.card-header { font-weight: bold;}
		.btn { padding-bottom: 5px;}
	</style>
		
	
	
   <title>Whitch Way? </title>
  </head>
  
  
  <body >
   
   <h1> Whitch Way? </h1>
   
   
   <form id="intro" autocomplete="off" >
   
   <button type="button" class="btn btn-success"  onclick="addRoute()">+ Add one more Route</button>
  <button type="save" class="btn btn-primary"  onclick="manipulateURL()">Save</button> 
	<br />
	<br />
   
   
   
    <!-- Route 1 -->
	<div class="card">
  <div class="card-header">
    Route 1
  </div>
  <div class="card-body">
	  <div class="input-group">
	  <span class="input-group-addon" id="basic-addon1">From</span>
	  <input id="from1" list="stationFrom" onkeypress="findStation()" value="" type="text" class="form-control" placeholder="Station From" aria-label="from" aria-describedby="basic-addon1">
		<datalist id="stationFrom">
			<option value="Aeschenplatz">
			<option value="Aesch Dorf">
		</datalist>
	
	</div>
	</br>
	<div class="input-group">
	  <span class="input-group-addon" id="basic-addon1">To</span>
	  <input id="to1" list="stationTo" value="" type="text" class="form-control" placeholder="Station To" aria-label="to" aria-describedby="basic-addon1">
		<datalist id="stationTo">
			<option value="Aeschenplatz">
			<option value="Aesch Dorf">
		</datalist>
	
	
	</div>
    <div id="counterThrough" value="0" style ="visibility: collapse" >0</div>
	
	
  </div>
</div>
	</br>
	

 
  
  <div id="moreRoute1"></div>
  <div id="counterRoute" value="1" style ="visibility: collapse" >1</div>
  
  
  
 
</form>

<div id="result" class="visibilityNo" >
	<button type="button" class="btn btn-danger" onclick="edit()">Edite Routes</button>
   
 </div>  
   
   
   <script src="whitchway.js" ></script>
  </body>
</html>
